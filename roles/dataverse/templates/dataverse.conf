<VirtualHost *:443>
    ServerName dataverse.{{ callisto_url }}

    SSLEngine on
    # Houlala mise a jour a faire !
    #SSLProtocol +TLSv1.2 -TLSv1.3
    SSLProtocol +TLSv1.2

    # Using autosigned certificates (temporary)
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key

   #
   # Callisto: Do not pass those urls to glassfish
   #

     ProxyPassMatch ^/RApacheInfo$ !
     ProxyPassMatch ^/custom !
     ProxyPassMatch ^/dataexplore !

   # Passing everything else to glassfish
     ProxyPass / ajp://localhost:8009/

   # Used by Shibboleth authentication
     SetEnvIf AJP_mail                   "(.*)" AJP_mail=$1
     SetEnvIf AJP_sn                     "(.*)" AJP_sn=$1
     SetEnvIf AJP_givenName              "(.*)" AJP_givenName=$1
     SetEnvIf AJP_eppn                   "(.*)" AJP_eppn=$1
     SetEnvIf AJP_Shib-Identity-Provider "(.*)" AJP_Shib-Identity-Provider=$1
</Virtualhost>

